# To prevent excessive use of resources, start with a simple static and nonstatic build.
# Then make every other build a matrix build depending on the initial one succeeding.

# Job dependencies: https://docs.microsoft.com/en-us/azure/devops/pipelines/process/conditions?view=vsts&tabs=yaml#job-status-functions
# Matrix build strategy: https://docs.microsoft.com/en-us/azure/devops/pipelines/process/phases?view=vsts&tabs=yaml#multi-configuration
jobs:
- job: alpine_3_6_static_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd alpine-3.6
      docker build --pull --no-cache -t rippled/alpine-3.6 .
      docker run --rm -t rippled/alpine-3.6 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=ON --generator_option=-GNinja"
- job: alpine_3_6_nonstatic_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd alpine-3.6
      docker build --pull --no-cache -t rippled/alpine-3.6 .
      docker run --rm -t rippled/alpine-3.6 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=OFF --generator_option=-GNinja"
- job: alpine_3_7_static_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd alpine-3.7
      docker build --pull --no-cache -t rippled/alpine-3.7 .
      docker run --rm -t rippled/alpine-3.7 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=ON --generator_option=-GNinja"
- job: alpine_3_7_nonstatic_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd alpine-3.7
      docker build --pull --no-cache -t rippled/alpine-3.7 .
      docker run --rm -t rippled/alpine-3.7 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=OFF --generator_option=-GNinja"
- job: alpine_3_8_static_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd alpine-3.8
      docker build --pull --no-cache -t rippled/alpine-3.8 .
      docker run --rm -t rippled/alpine-3.8 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=ON --generator_option=-GNinja"
- job: alpine_3_8_nonstatic_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd alpine-3.8
      docker build --pull --no-cache -t rippled/alpine-3.8 .
      docker run --rm -t rippled/alpine-3.8 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=OFF --generator_option=-GNinja"
- job: alpine_3_9_static_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd alpine-3.9
      docker build --pull --no-cache -t rippled/alpine-3.9 .
      docker run --rm -t rippled/alpine-3.9 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=ON --generator_option=-GNinja"
- job: alpine_3_9_nonstatic_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd alpine-3.9
      docker build --pull --no-cache -t rippled/alpine-3.9 .
      docker run --rm -t rippled/alpine-3.9 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=OFF --generator_option=-GNinja"
- job: alpine_edge_static_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd alpine-edge
      docker build --pull --no-cache -t rippled/alpine-edge .
      docker run --rm -t rippled/alpine-edge /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=ON --generator_option=-GNinja"
- job: alpine_edge_nonstatic_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd alpine-edge
      docker build --pull --no-cache -t rippled/alpine-edge .
      docker run --rm -t rippled/alpine-edge /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=OFF --generator_option=-GNinja"
- job: archlinux_static_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd archlinux
      docker build --pull --no-cache -t rippled/archlinux .
      docker run --rm -t rippled/archlinux /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=ON --generator_option=-GNinja"
- job: archlinux_nonstatic_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd archlinux
      docker build --pull --no-cache -t rippled/archlinux .
      docker run --rm -t rippled/archlinux /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=OFF --generator_option=-GNinja"
- job: centos_7_static_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd centos-7
      docker build --pull --no-cache -t rippled/centos-7 .
      docker run --rm -t rippled/centos-7 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=ON --generator_option=-GNinja"
- job: centos_7_nonstatic_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd centos-7
      docker build --pull --no-cache -t rippled/centos-7 .
      docker run --rm -t rippled/centos-7 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=OFF --generator_option=-GNinja"
- job: debian_jessie_static_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd debian-jessie
      docker build --pull --no-cache -t rippled/debian-jessie .
      docker run --rm -t rippled/debian-jessie /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=ON --generator_option=-GNinja"
- job: debian_jessie_nonstatic_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd debian-jessie
      docker build --pull --no-cache -t rippled/debian-jessie .
      docker run --rm -t rippled/debian-jessie /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=OFF --generator_option=-GNinja"
- job: debian_stretch_static_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd debian-stretch
      docker build --pull --no-cache -t rippled/debian-stretch .
      docker run --rm -t rippled/debian-stretch /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=ON --generator_option=-GNinja"
- job: debian_stretch_nonstatic_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd debian-stretch
      docker build --pull --no-cache -t rippled/debian-stretch .
      docker run --rm -t rippled/debian-stretch /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=OFF --generator_option=-GNinja"
- job: debian_buster_static_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd debian-buster
      docker build --pull --no-cache -t rippled/debian-buster .
      docker run --rm -t rippled/debian-buster /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=ON --generator_option=-GNinja"
- job: debian_buster_nonstatic_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd debian-buster
      docker build --pull --no-cache -t rippled/debian-buster .
      docker run --rm -t rippled/debian-buster /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=OFF --generator_option=-GNinja"
- job: debian_sid_static_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd debian-sid
      docker build --pull --no-cache -t rippled/debian-sid .
      docker run --rm -t rippled/debian-sid /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=ON --generator_option=-GNinja"
- job: debian_sid_nonstatic_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd debian-sid
      docker build --pull --no-cache -t rippled/debian-sid .
      docker run --rm -t rippled/debian-sid /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=OFF --generator_option=-GNinja"
- job: fedora_28_static_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd fedora-28
      docker build --pull --no-cache -t rippled/fedora-28 .
      docker run --rm -t rippled/fedora-28 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=ON --generator_option=-GNinja"
- job: fedora_28_nonstatic_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd fedora-28
      docker build --pull --no-cache -t rippled/fedora-28 .
      docker run --rm -t rippled/fedora-28 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=OFF --generator_option=-GNinja"
- job: fedora_29_static_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd fedora-29
      docker build --pull --no-cache -t rippled/fedora-29 .
      docker run --rm -t rippled/fedora-29 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=ON --generator_option=-GNinja"
- job: fedora_29_nonstatic_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd fedora-29
      docker build --pull --no-cache -t rippled/fedora-29 .
      docker run --rm -t rippled/fedora-29 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=OFF --generator_option=-GNinja"
- job: fedora_30_static_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd fedora-30
      docker build --pull --no-cache -t rippled/fedora-30 .
      docker run --rm -t rippled/fedora-30 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=ON --generator_option=-GNinja"
- job: fedora_30_nonstatic_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd fedora-30
      docker build --pull --no-cache -t rippled/fedora-30 .
      docker run --rm -t rippled/fedora-30 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=OFF --generator_option=-GNinja"
- job: fedora_rawhide_static_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd fedora-rawhide
      docker build --pull --no-cache -t rippled/fedora-rawhide .
      docker run --rm -t rippled/fedora-rawhide /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=ON --generator_option=-GNinja"
- job: fedora_rawhide_nonstatic_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd fedora-rawhide
      docker build --pull --no-cache -t rippled/fedora-rawhide .
      docker run --rm -t rippled/fedora-rawhide /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=OFF --generator_option=-GNinja"
- job: opensuse_leap_42_static_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd opensuse-leap-42
      docker build --pull --no-cache -t rippled/opensuse-leap-42 .
      docker run --rm -t rippled/opensuse-leap-42 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=ON --generator_option=-GNinja"
- job: opensuse_leap_42_nonstatic_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd opensuse-leap-42
      docker build --pull --no-cache -t rippled/opensuse-leap-42 .
      docker run --rm -t rippled/opensuse-leap-42 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=OFF --generator_option=-GNinja"
- job: opensuse_leap_15_static_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd opensuse-leap-15
      docker build --pull --no-cache -t rippled/opensuse-leap-15 .
      docker run --rm -t rippled/opensuse-leap-15 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=ON --generator_option=-GNinja"
- job: opensuse_leap_15_nonstatic_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd opensuse-leap-15
      docker build --pull --no-cache -t rippled/opensuse-leap-15 .
      docker run --rm -t rippled/opensuse-leap-15 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=OFF --generator_option=-GNinja"
- job: opensuse_tumbleweed_static_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd opensuse-tumbleweed
      docker build --pull --no-cache -t rippled/opensuse-tumbleweed .
      docker run --rm -t rippled/opensuse-tumbleweed /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=ON --generator_option=-GNinja"
- job: opensuse_tumbleweed_nonstatic_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd opensuse-tumbleweed
      docker build --pull --no-cache -t rippled/opensuse-tumbleweed .
      docker run --rm -t rippled/opensuse-tumbleweed /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=OFF --generator_option=-GNinja"
- job: ubuntu_16_04_static_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd ubuntu-16.04
      docker build --pull --no-cache -t rippled/ubuntu-16.04 .
      docker run --rm -t rippled/ubuntu-16.04 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=ON --generator_option=-GNinja"
- job: ubuntu_16_04_nonstatic_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd ubuntu-16.04
      docker build --pull --no-cache -t rippled/ubuntu-16.04 .
      docker run --rm -t rippled/ubuntu-16.04 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=OFF --generator_option=-GNinja"
- job: ubuntu_18_04_static_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd ubuntu-18.04
      docker build --pull --no-cache -t rippled/ubuntu-18.04 .
      docker run --rm -t rippled/ubuntu-18.04 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=ON --generator_option=-GNinja"
- job: ubuntu_18_04_nonstatic_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd ubuntu-18.04
      docker build --pull --no-cache -t rippled/ubuntu-18.04 .
      docker run --rm -t rippled/ubuntu-18.04 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=OFF --generator_option=-GNinja"
- job: ubuntu_18_10_static_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd ubuntu-18.10
      docker build --pull --no-cache -t rippled/ubuntu-18.10 .
      docker run --rm -t rippled/ubuntu-18.10 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=ON --generator_option=-GNinja"
- job: ubuntu_18_10_nonstatic_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd ubuntu-18.10
      docker build --pull --no-cache -t rippled/ubuntu-18.10 .
      docker run --rm -t rippled/ubuntu-18.10 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=OFF --generator_option=-GNinja"
- job: ubuntu_19_04_static_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd ubuntu-19.04
      docker build --pull --no-cache -t rippled/ubuntu-19.04 .
      docker run --rm -t rippled/ubuntu-19.04 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=ON --generator_option=-GNinja"
- job: ubuntu_19_04_nonstatic_smoketest
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      cd ubuntu-19.04
      docker build --pull --no-cache -t rippled/ubuntu-19.04 .
      docker run --rm -t rippled/ubuntu-19.04 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-Dstatic=OFF --generator_option=-GNinja"
# actual matrix builds start here
- job: alpine_3_6_static_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: alpine_3_6_static_smoketest
  condition: succeeded()
  strategy:
    matrix:
      alpine_3_6_static_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      alpine_3_6_static_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      alpine_3_6_static_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      alpine_3_6_static_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      alpine_3_6_static_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      alpine_3_6_static_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      alpine_3_6_static_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      alpine_3_6_static_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      alpine_3_6_static_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      alpine_3_6_static_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      alpine_3_6_static_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      alpine_3_6_static_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      alpine_3_6_static_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      alpine_3_6_static_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      alpine_3_6_static_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      alpine_3_6_static_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      alpine_3_6_static_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      alpine_3_6_static_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      alpine_3_6_static_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      alpine_3_6_static_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      alpine_3_6_static_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      alpine_3_6_static_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      alpine_3_6_static_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      alpine_3_6_static_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      alpine_3_6_static_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      alpine_3_6_static_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      alpine_3_6_static_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      alpine_3_6_static_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      alpine_3_6_static_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      alpine_3_6_static_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      alpine_3_6_static_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      alpine_3_6_static_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      alpine_3_6_static_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      alpine_3_6_static_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      alpine_3_6_static_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      alpine_3_6_static_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      alpine_3_6_static_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      alpine_3_6_static_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      alpine_3_6_static_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      alpine_3_6_static_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd alpine-3.6
      docker build --pull --no-cache -t rippled/alpine-3.6 .
      docker run --rm -t rippled/alpine-3.6 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=ON $TEST_PY_OPTS"
- job: alpine_3_6_nonstatic_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: alpine_3_6_nonstatic_smoketest
  condition: succeeded()
  strategy:
    matrix:
      alpine_3_6_nonstatic_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      alpine_3_6_nonstatic_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      alpine_3_6_nonstatic_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      alpine_3_6_nonstatic_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      alpine_3_6_nonstatic_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      alpine_3_6_nonstatic_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      alpine_3_6_nonstatic_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      alpine_3_6_nonstatic_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      alpine_3_6_nonstatic_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      alpine_3_6_nonstatic_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      alpine_3_6_nonstatic_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      alpine_3_6_nonstatic_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      alpine_3_6_nonstatic_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      alpine_3_6_nonstatic_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      alpine_3_6_nonstatic_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      alpine_3_6_nonstatic_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      alpine_3_6_nonstatic_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      alpine_3_6_nonstatic_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      alpine_3_6_nonstatic_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      alpine_3_6_nonstatic_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      alpine_3_6_nonstatic_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      alpine_3_6_nonstatic_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      alpine_3_6_nonstatic_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      alpine_3_6_nonstatic_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      alpine_3_6_nonstatic_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      alpine_3_6_nonstatic_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      alpine_3_6_nonstatic_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      alpine_3_6_nonstatic_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      alpine_3_6_nonstatic_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      alpine_3_6_nonstatic_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      alpine_3_6_nonstatic_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      alpine_3_6_nonstatic_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      alpine_3_6_nonstatic_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      alpine_3_6_nonstatic_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      alpine_3_6_nonstatic_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      alpine_3_6_nonstatic_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      alpine_3_6_nonstatic_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      alpine_3_6_nonstatic_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      alpine_3_6_nonstatic_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      alpine_3_6_nonstatic_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd alpine-3.6
      docker build --pull --no-cache -t rippled/alpine-3.6 .
      docker run --rm -t rippled/alpine-3.6 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=OFF $TEST_PY_OPTS"
- job: alpine_3_7_static_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: alpine_3_7_static_smoketest
  condition: succeeded()
  strategy:
    matrix:
      alpine_3_7_static_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      alpine_3_7_static_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      alpine_3_7_static_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      alpine_3_7_static_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      alpine_3_7_static_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      alpine_3_7_static_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      alpine_3_7_static_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      alpine_3_7_static_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      alpine_3_7_static_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      alpine_3_7_static_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      alpine_3_7_static_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      alpine_3_7_static_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      alpine_3_7_static_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      alpine_3_7_static_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      alpine_3_7_static_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      alpine_3_7_static_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      alpine_3_7_static_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      alpine_3_7_static_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      alpine_3_7_static_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      alpine_3_7_static_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      alpine_3_7_static_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      alpine_3_7_static_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      alpine_3_7_static_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      alpine_3_7_static_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      alpine_3_7_static_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      alpine_3_7_static_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      alpine_3_7_static_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      alpine_3_7_static_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      alpine_3_7_static_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      alpine_3_7_static_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      alpine_3_7_static_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      alpine_3_7_static_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      alpine_3_7_static_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      alpine_3_7_static_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      alpine_3_7_static_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      alpine_3_7_static_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      alpine_3_7_static_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      alpine_3_7_static_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      alpine_3_7_static_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      alpine_3_7_static_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd alpine-3.7
      docker build --pull --no-cache -t rippled/alpine-3.7 .
      docker run --rm -t rippled/alpine-3.7 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=ON $TEST_PY_OPTS"
- job: alpine_3_7_nonstatic_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: alpine_3_7_nonstatic_smoketest
  condition: succeeded()
  strategy:
    matrix:
      alpine_3_7_nonstatic_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      alpine_3_7_nonstatic_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      alpine_3_7_nonstatic_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      alpine_3_7_nonstatic_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      alpine_3_7_nonstatic_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      alpine_3_7_nonstatic_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      alpine_3_7_nonstatic_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      alpine_3_7_nonstatic_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      alpine_3_7_nonstatic_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      alpine_3_7_nonstatic_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      alpine_3_7_nonstatic_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      alpine_3_7_nonstatic_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      alpine_3_7_nonstatic_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      alpine_3_7_nonstatic_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      alpine_3_7_nonstatic_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      alpine_3_7_nonstatic_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      alpine_3_7_nonstatic_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      alpine_3_7_nonstatic_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      alpine_3_7_nonstatic_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      alpine_3_7_nonstatic_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      alpine_3_7_nonstatic_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      alpine_3_7_nonstatic_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      alpine_3_7_nonstatic_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      alpine_3_7_nonstatic_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      alpine_3_7_nonstatic_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      alpine_3_7_nonstatic_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      alpine_3_7_nonstatic_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      alpine_3_7_nonstatic_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      alpine_3_7_nonstatic_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      alpine_3_7_nonstatic_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      alpine_3_7_nonstatic_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      alpine_3_7_nonstatic_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      alpine_3_7_nonstatic_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      alpine_3_7_nonstatic_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      alpine_3_7_nonstatic_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      alpine_3_7_nonstatic_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      alpine_3_7_nonstatic_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      alpine_3_7_nonstatic_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      alpine_3_7_nonstatic_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      alpine_3_7_nonstatic_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd alpine-3.7
      docker build --pull --no-cache -t rippled/alpine-3.7 .
      docker run --rm -t rippled/alpine-3.7 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=OFF $TEST_PY_OPTS"
- job: alpine_3_8_static_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: alpine_3_8_static_smoketest
  condition: succeeded()
  strategy:
    matrix:
      alpine_3_8_static_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      alpine_3_8_static_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      alpine_3_8_static_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      alpine_3_8_static_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      alpine_3_8_static_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      alpine_3_8_static_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      alpine_3_8_static_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      alpine_3_8_static_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      alpine_3_8_static_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      alpine_3_8_static_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      alpine_3_8_static_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      alpine_3_8_static_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      alpine_3_8_static_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      alpine_3_8_static_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      alpine_3_8_static_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      alpine_3_8_static_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      alpine_3_8_static_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      alpine_3_8_static_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      alpine_3_8_static_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      alpine_3_8_static_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      alpine_3_8_static_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      alpine_3_8_static_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      alpine_3_8_static_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      alpine_3_8_static_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      alpine_3_8_static_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      alpine_3_8_static_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      alpine_3_8_static_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      alpine_3_8_static_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      alpine_3_8_static_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      alpine_3_8_static_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      alpine_3_8_static_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      alpine_3_8_static_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      alpine_3_8_static_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      alpine_3_8_static_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      alpine_3_8_static_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      alpine_3_8_static_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      alpine_3_8_static_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      alpine_3_8_static_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      alpine_3_8_static_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      alpine_3_8_static_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd alpine-3.8
      docker build --pull --no-cache -t rippled/alpine-3.8 .
      docker run --rm -t rippled/alpine-3.8 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=ON $TEST_PY_OPTS"
- job: alpine_3_8_nonstatic_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: alpine_3_8_nonstatic_smoketest
  condition: succeeded()
  strategy:
    matrix:
      alpine_3_8_nonstatic_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      alpine_3_8_nonstatic_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      alpine_3_8_nonstatic_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      alpine_3_8_nonstatic_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      alpine_3_8_nonstatic_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      alpine_3_8_nonstatic_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      alpine_3_8_nonstatic_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      alpine_3_8_nonstatic_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      alpine_3_8_nonstatic_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      alpine_3_8_nonstatic_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      alpine_3_8_nonstatic_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      alpine_3_8_nonstatic_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      alpine_3_8_nonstatic_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      alpine_3_8_nonstatic_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      alpine_3_8_nonstatic_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      alpine_3_8_nonstatic_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      alpine_3_8_nonstatic_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      alpine_3_8_nonstatic_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      alpine_3_8_nonstatic_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      alpine_3_8_nonstatic_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      alpine_3_8_nonstatic_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      alpine_3_8_nonstatic_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      alpine_3_8_nonstatic_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      alpine_3_8_nonstatic_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      alpine_3_8_nonstatic_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      alpine_3_8_nonstatic_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      alpine_3_8_nonstatic_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      alpine_3_8_nonstatic_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      alpine_3_8_nonstatic_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      alpine_3_8_nonstatic_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      alpine_3_8_nonstatic_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      alpine_3_8_nonstatic_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      alpine_3_8_nonstatic_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      alpine_3_8_nonstatic_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      alpine_3_8_nonstatic_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      alpine_3_8_nonstatic_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      alpine_3_8_nonstatic_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      alpine_3_8_nonstatic_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      alpine_3_8_nonstatic_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      alpine_3_8_nonstatic_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd alpine-3.8
      docker build --pull --no-cache -t rippled/alpine-3.8 .
      docker run --rm -t rippled/alpine-3.8 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=OFF $TEST_PY_OPTS"
- job: alpine_3_9_static_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: alpine_3_9_static_smoketest
  condition: succeeded()
  strategy:
    matrix:
      alpine_3_9_static_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      alpine_3_9_static_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      alpine_3_9_static_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      alpine_3_9_static_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      alpine_3_9_static_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      alpine_3_9_static_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      alpine_3_9_static_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      alpine_3_9_static_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      alpine_3_9_static_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      alpine_3_9_static_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      alpine_3_9_static_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      alpine_3_9_static_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      alpine_3_9_static_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      alpine_3_9_static_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      alpine_3_9_static_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      alpine_3_9_static_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      alpine_3_9_static_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      alpine_3_9_static_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      alpine_3_9_static_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      alpine_3_9_static_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      alpine_3_9_static_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      alpine_3_9_static_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      alpine_3_9_static_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      alpine_3_9_static_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      alpine_3_9_static_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      alpine_3_9_static_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      alpine_3_9_static_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      alpine_3_9_static_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      alpine_3_9_static_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      alpine_3_9_static_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      alpine_3_9_static_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      alpine_3_9_static_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      alpine_3_9_static_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      alpine_3_9_static_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      alpine_3_9_static_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      alpine_3_9_static_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      alpine_3_9_static_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      alpine_3_9_static_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      alpine_3_9_static_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      alpine_3_9_static_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd alpine-3.9
      docker build --pull --no-cache -t rippled/alpine-3.9 .
      docker run --rm -t rippled/alpine-3.9 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=ON $TEST_PY_OPTS"
- job: alpine_3_9_nonstatic_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: alpine_3_9_nonstatic_smoketest
  condition: succeeded()
  strategy:
    matrix:
      alpine_3_9_nonstatic_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      alpine_3_9_nonstatic_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      alpine_3_9_nonstatic_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      alpine_3_9_nonstatic_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      alpine_3_9_nonstatic_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      alpine_3_9_nonstatic_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      alpine_3_9_nonstatic_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      alpine_3_9_nonstatic_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      alpine_3_9_nonstatic_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      alpine_3_9_nonstatic_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      alpine_3_9_nonstatic_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      alpine_3_9_nonstatic_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      alpine_3_9_nonstatic_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      alpine_3_9_nonstatic_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      alpine_3_9_nonstatic_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      alpine_3_9_nonstatic_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      alpine_3_9_nonstatic_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      alpine_3_9_nonstatic_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      alpine_3_9_nonstatic_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      alpine_3_9_nonstatic_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      alpine_3_9_nonstatic_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      alpine_3_9_nonstatic_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      alpine_3_9_nonstatic_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      alpine_3_9_nonstatic_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      alpine_3_9_nonstatic_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      alpine_3_9_nonstatic_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      alpine_3_9_nonstatic_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      alpine_3_9_nonstatic_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      alpine_3_9_nonstatic_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      alpine_3_9_nonstatic_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      alpine_3_9_nonstatic_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      alpine_3_9_nonstatic_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      alpine_3_9_nonstatic_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      alpine_3_9_nonstatic_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      alpine_3_9_nonstatic_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      alpine_3_9_nonstatic_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      alpine_3_9_nonstatic_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      alpine_3_9_nonstatic_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      alpine_3_9_nonstatic_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      alpine_3_9_nonstatic_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd alpine-3.9
      docker build --pull --no-cache -t rippled/alpine-3.9 .
      docker run --rm -t rippled/alpine-3.9 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=OFF $TEST_PY_OPTS"
- job: alpine_edge_static_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: alpine_edge_static_smoketest
  condition: succeeded()
  strategy:
    matrix:
      alpine_edge_static_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      alpine_edge_static_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      alpine_edge_static_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      alpine_edge_static_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      alpine_edge_static_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      alpine_edge_static_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      alpine_edge_static_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      alpine_edge_static_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      alpine_edge_static_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      alpine_edge_static_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      alpine_edge_static_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      alpine_edge_static_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      alpine_edge_static_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      alpine_edge_static_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      alpine_edge_static_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      alpine_edge_static_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      alpine_edge_static_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      alpine_edge_static_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      alpine_edge_static_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      alpine_edge_static_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      alpine_edge_static_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      alpine_edge_static_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      alpine_edge_static_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      alpine_edge_static_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      alpine_edge_static_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      alpine_edge_static_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      alpine_edge_static_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      alpine_edge_static_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      alpine_edge_static_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      alpine_edge_static_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      alpine_edge_static_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      alpine_edge_static_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      alpine_edge_static_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      alpine_edge_static_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      alpine_edge_static_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      alpine_edge_static_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      alpine_edge_static_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      alpine_edge_static_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      alpine_edge_static_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      alpine_edge_static_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd alpine-edge
      docker build --pull --no-cache -t rippled/alpine-edge .
      docker run --rm -t rippled/alpine-edge /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=ON $TEST_PY_OPTS"
- job: alpine_edge_nonstatic_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: alpine_edge_nonstatic_smoketest
  condition: succeeded()
  strategy:
    matrix:
      alpine_edge_nonstatic_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      alpine_edge_nonstatic_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      alpine_edge_nonstatic_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      alpine_edge_nonstatic_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      alpine_edge_nonstatic_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      alpine_edge_nonstatic_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      alpine_edge_nonstatic_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      alpine_edge_nonstatic_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      alpine_edge_nonstatic_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      alpine_edge_nonstatic_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      alpine_edge_nonstatic_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      alpine_edge_nonstatic_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      alpine_edge_nonstatic_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      alpine_edge_nonstatic_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      alpine_edge_nonstatic_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      alpine_edge_nonstatic_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      alpine_edge_nonstatic_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      alpine_edge_nonstatic_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      alpine_edge_nonstatic_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      alpine_edge_nonstatic_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      alpine_edge_nonstatic_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      alpine_edge_nonstatic_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      alpine_edge_nonstatic_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      alpine_edge_nonstatic_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      alpine_edge_nonstatic_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      alpine_edge_nonstatic_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      alpine_edge_nonstatic_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      alpine_edge_nonstatic_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      alpine_edge_nonstatic_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      alpine_edge_nonstatic_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      alpine_edge_nonstatic_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      alpine_edge_nonstatic_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      alpine_edge_nonstatic_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      alpine_edge_nonstatic_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      alpine_edge_nonstatic_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      alpine_edge_nonstatic_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      alpine_edge_nonstatic_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      alpine_edge_nonstatic_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      alpine_edge_nonstatic_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      alpine_edge_nonstatic_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd alpine-edge
      docker build --pull --no-cache -t rippled/alpine-edge .
      docker run --rm -t rippled/alpine-edge /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=OFF $TEST_PY_OPTS"
- job: archlinux_static_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: archlinux_static_smoketest
  condition: succeeded()
  strategy:
    matrix:
      archlinux_static_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      archlinux_static_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      archlinux_static_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      archlinux_static_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      archlinux_static_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      archlinux_static_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      archlinux_static_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      archlinux_static_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      archlinux_static_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      archlinux_static_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      archlinux_static_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      archlinux_static_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      archlinux_static_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      archlinux_static_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      archlinux_static_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      archlinux_static_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      archlinux_static_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      archlinux_static_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      archlinux_static_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      archlinux_static_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      archlinux_static_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      archlinux_static_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      archlinux_static_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      archlinux_static_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      archlinux_static_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      archlinux_static_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      archlinux_static_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      archlinux_static_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      archlinux_static_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      archlinux_static_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      archlinux_static_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      archlinux_static_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      archlinux_static_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      archlinux_static_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      archlinux_static_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      archlinux_static_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      archlinux_static_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      archlinux_static_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      archlinux_static_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      archlinux_static_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd archlinux
      docker build --pull --no-cache -t rippled/archlinux .
      docker run --rm -t rippled/archlinux /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=ON $TEST_PY_OPTS"
- job: archlinux_nonstatic_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: archlinux_nonstatic_smoketest
  condition: succeeded()
  strategy:
    matrix:
      archlinux_nonstatic_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      archlinux_nonstatic_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      archlinux_nonstatic_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      archlinux_nonstatic_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      archlinux_nonstatic_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      archlinux_nonstatic_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      archlinux_nonstatic_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      archlinux_nonstatic_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      archlinux_nonstatic_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      archlinux_nonstatic_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      archlinux_nonstatic_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      archlinux_nonstatic_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      archlinux_nonstatic_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      archlinux_nonstatic_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      archlinux_nonstatic_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      archlinux_nonstatic_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      archlinux_nonstatic_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      archlinux_nonstatic_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      archlinux_nonstatic_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      archlinux_nonstatic_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      archlinux_nonstatic_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      archlinux_nonstatic_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      archlinux_nonstatic_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      archlinux_nonstatic_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      archlinux_nonstatic_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      archlinux_nonstatic_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      archlinux_nonstatic_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      archlinux_nonstatic_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      archlinux_nonstatic_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      archlinux_nonstatic_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      archlinux_nonstatic_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      archlinux_nonstatic_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      archlinux_nonstatic_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      archlinux_nonstatic_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      archlinux_nonstatic_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      archlinux_nonstatic_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      archlinux_nonstatic_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      archlinux_nonstatic_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      archlinux_nonstatic_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      archlinux_nonstatic_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd archlinux
      docker build --pull --no-cache -t rippled/archlinux .
      docker run --rm -t rippled/archlinux /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=OFF $TEST_PY_OPTS"
- job: centos_7_static_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: centos_7_static_smoketest
  condition: succeeded()
  strategy:
    matrix:
      centos_7_static_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      centos_7_static_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      centos_7_static_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      centos_7_static_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      centos_7_static_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      centos_7_static_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      centos_7_static_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      centos_7_static_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      centos_7_static_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      centos_7_static_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      centos_7_static_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      centos_7_static_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      centos_7_static_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      centos_7_static_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      centos_7_static_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      centos_7_static_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      centos_7_static_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      centos_7_static_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      centos_7_static_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      centos_7_static_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      centos_7_static_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      centos_7_static_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      centos_7_static_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      centos_7_static_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      centos_7_static_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      centos_7_static_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      centos_7_static_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      centos_7_static_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      centos_7_static_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      centos_7_static_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      centos_7_static_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      centos_7_static_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      centos_7_static_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      centos_7_static_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      centos_7_static_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      centos_7_static_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      centos_7_static_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      centos_7_static_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      centos_7_static_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      centos_7_static_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd centos-7
      docker build --pull --no-cache -t rippled/centos-7 .
      docker run --rm -t rippled/centos-7 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=ON $TEST_PY_OPTS"
- job: centos_7_nonstatic_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: centos_7_nonstatic_smoketest
  condition: succeeded()
  strategy:
    matrix:
      centos_7_nonstatic_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      centos_7_nonstatic_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      centos_7_nonstatic_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      centos_7_nonstatic_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      centos_7_nonstatic_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      centos_7_nonstatic_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      centos_7_nonstatic_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      centos_7_nonstatic_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      centos_7_nonstatic_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      centos_7_nonstatic_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      centos_7_nonstatic_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      centos_7_nonstatic_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      centos_7_nonstatic_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      centos_7_nonstatic_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      centos_7_nonstatic_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      centos_7_nonstatic_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      centos_7_nonstatic_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      centos_7_nonstatic_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      centos_7_nonstatic_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      centos_7_nonstatic_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      centos_7_nonstatic_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      centos_7_nonstatic_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      centos_7_nonstatic_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      centos_7_nonstatic_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      centos_7_nonstatic_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      centos_7_nonstatic_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      centos_7_nonstatic_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      centos_7_nonstatic_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      centos_7_nonstatic_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      centos_7_nonstatic_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      centos_7_nonstatic_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      centos_7_nonstatic_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      centos_7_nonstatic_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      centos_7_nonstatic_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      centos_7_nonstatic_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      centos_7_nonstatic_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      centos_7_nonstatic_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      centos_7_nonstatic_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      centos_7_nonstatic_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      centos_7_nonstatic_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd centos-7
      docker build --pull --no-cache -t rippled/centos-7 .
      docker run --rm -t rippled/centos-7 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=OFF $TEST_PY_OPTS"
- job: debian_jessie_static_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: debian_jessie_static_smoketest
  condition: succeeded()
  strategy:
    matrix:
      debian_jessie_static_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      debian_jessie_static_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      debian_jessie_static_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      debian_jessie_static_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      debian_jessie_static_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      debian_jessie_static_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      debian_jessie_static_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      debian_jessie_static_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      debian_jessie_static_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      debian_jessie_static_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      debian_jessie_static_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      debian_jessie_static_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      debian_jessie_static_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      debian_jessie_static_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      debian_jessie_static_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      debian_jessie_static_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      debian_jessie_static_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      debian_jessie_static_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      debian_jessie_static_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      debian_jessie_static_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      debian_jessie_static_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      debian_jessie_static_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      debian_jessie_static_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      debian_jessie_static_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      debian_jessie_static_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      debian_jessie_static_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      debian_jessie_static_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      debian_jessie_static_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      debian_jessie_static_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      debian_jessie_static_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      debian_jessie_static_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      debian_jessie_static_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      debian_jessie_static_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      debian_jessie_static_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      debian_jessie_static_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      debian_jessie_static_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      debian_jessie_static_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      debian_jessie_static_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      debian_jessie_static_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      debian_jessie_static_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd debian-jessie
      docker build --pull --no-cache -t rippled/debian-jessie .
      docker run --rm -t rippled/debian-jessie /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=ON $TEST_PY_OPTS"
- job: debian_jessie_nonstatic_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: debian_jessie_nonstatic_smoketest
  condition: succeeded()
  strategy:
    matrix:
      debian_jessie_nonstatic_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      debian_jessie_nonstatic_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      debian_jessie_nonstatic_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      debian_jessie_nonstatic_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      debian_jessie_nonstatic_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      debian_jessie_nonstatic_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      debian_jessie_nonstatic_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      debian_jessie_nonstatic_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      debian_jessie_nonstatic_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      debian_jessie_nonstatic_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      debian_jessie_nonstatic_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      debian_jessie_nonstatic_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      debian_jessie_nonstatic_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      debian_jessie_nonstatic_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      debian_jessie_nonstatic_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      debian_jessie_nonstatic_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      debian_jessie_nonstatic_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      debian_jessie_nonstatic_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      debian_jessie_nonstatic_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      debian_jessie_nonstatic_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      debian_jessie_nonstatic_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      debian_jessie_nonstatic_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      debian_jessie_nonstatic_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      debian_jessie_nonstatic_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      debian_jessie_nonstatic_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      debian_jessie_nonstatic_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      debian_jessie_nonstatic_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      debian_jessie_nonstatic_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      debian_jessie_nonstatic_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      debian_jessie_nonstatic_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      debian_jessie_nonstatic_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      debian_jessie_nonstatic_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      debian_jessie_nonstatic_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      debian_jessie_nonstatic_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      debian_jessie_nonstatic_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      debian_jessie_nonstatic_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      debian_jessie_nonstatic_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      debian_jessie_nonstatic_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      debian_jessie_nonstatic_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      debian_jessie_nonstatic_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd debian-jessie
      docker build --pull --no-cache -t rippled/debian-jessie .
      docker run --rm -t rippled/debian-jessie /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=OFF $TEST_PY_OPTS"
- job: debian_stretch_static_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: debian_stretch_static_smoketest
  condition: succeeded()
  strategy:
    matrix:
      debian_stretch_static_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      debian_stretch_static_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      debian_stretch_static_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      debian_stretch_static_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      debian_stretch_static_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      debian_stretch_static_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      debian_stretch_static_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      debian_stretch_static_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      debian_stretch_static_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      debian_stretch_static_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      debian_stretch_static_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      debian_stretch_static_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      debian_stretch_static_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      debian_stretch_static_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      debian_stretch_static_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      debian_stretch_static_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      debian_stretch_static_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      debian_stretch_static_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      debian_stretch_static_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      debian_stretch_static_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      debian_stretch_static_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      debian_stretch_static_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      debian_stretch_static_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      debian_stretch_static_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      debian_stretch_static_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      debian_stretch_static_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      debian_stretch_static_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      debian_stretch_static_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      debian_stretch_static_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      debian_stretch_static_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      debian_stretch_static_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      debian_stretch_static_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      debian_stretch_static_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      debian_stretch_static_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      debian_stretch_static_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      debian_stretch_static_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      debian_stretch_static_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      debian_stretch_static_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      debian_stretch_static_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      debian_stretch_static_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd debian-stretch
      docker build --pull --no-cache -t rippled/debian-stretch .
      docker run --rm -t rippled/debian-stretch /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=ON $TEST_PY_OPTS"
- job: debian_stretch_nonstatic_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: debian_stretch_nonstatic_smoketest
  condition: succeeded()
  strategy:
    matrix:
      debian_stretch_nonstatic_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      debian_stretch_nonstatic_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      debian_stretch_nonstatic_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      debian_stretch_nonstatic_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      debian_stretch_nonstatic_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      debian_stretch_nonstatic_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      debian_stretch_nonstatic_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      debian_stretch_nonstatic_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      debian_stretch_nonstatic_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      debian_stretch_nonstatic_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      debian_stretch_nonstatic_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      debian_stretch_nonstatic_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      debian_stretch_nonstatic_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      debian_stretch_nonstatic_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      debian_stretch_nonstatic_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      debian_stretch_nonstatic_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      debian_stretch_nonstatic_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      debian_stretch_nonstatic_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      debian_stretch_nonstatic_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      debian_stretch_nonstatic_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      debian_stretch_nonstatic_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      debian_stretch_nonstatic_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      debian_stretch_nonstatic_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      debian_stretch_nonstatic_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      debian_stretch_nonstatic_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      debian_stretch_nonstatic_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      debian_stretch_nonstatic_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      debian_stretch_nonstatic_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      debian_stretch_nonstatic_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      debian_stretch_nonstatic_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      debian_stretch_nonstatic_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      debian_stretch_nonstatic_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      debian_stretch_nonstatic_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      debian_stretch_nonstatic_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      debian_stretch_nonstatic_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      debian_stretch_nonstatic_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      debian_stretch_nonstatic_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      debian_stretch_nonstatic_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      debian_stretch_nonstatic_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      debian_stretch_nonstatic_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd debian-stretch
      docker build --pull --no-cache -t rippled/debian-stretch .
      docker run --rm -t rippled/debian-stretch /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=OFF $TEST_PY_OPTS"
- job: debian_buster_static_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: debian_buster_static_smoketest
  condition: succeeded()
  strategy:
    matrix:
      debian_buster_static_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      debian_buster_static_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      debian_buster_static_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      debian_buster_static_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      debian_buster_static_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      debian_buster_static_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      debian_buster_static_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      debian_buster_static_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      debian_buster_static_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      debian_buster_static_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      debian_buster_static_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      debian_buster_static_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      debian_buster_static_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      debian_buster_static_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      debian_buster_static_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      debian_buster_static_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      debian_buster_static_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      debian_buster_static_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      debian_buster_static_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      debian_buster_static_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      debian_buster_static_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      debian_buster_static_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      debian_buster_static_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      debian_buster_static_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      debian_buster_static_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      debian_buster_static_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      debian_buster_static_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      debian_buster_static_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      debian_buster_static_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      debian_buster_static_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      debian_buster_static_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      debian_buster_static_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      debian_buster_static_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      debian_buster_static_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      debian_buster_static_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      debian_buster_static_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      debian_buster_static_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      debian_buster_static_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      debian_buster_static_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      debian_buster_static_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd debian-buster
      docker build --pull --no-cache -t rippled/debian-buster .
      docker run --rm -t rippled/debian-buster /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=ON $TEST_PY_OPTS"
- job: debian_buster_nonstatic_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: debian_buster_nonstatic_smoketest
  condition: succeeded()
  strategy:
    matrix:
      debian_buster_nonstatic_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      debian_buster_nonstatic_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      debian_buster_nonstatic_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      debian_buster_nonstatic_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      debian_buster_nonstatic_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      debian_buster_nonstatic_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      debian_buster_nonstatic_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      debian_buster_nonstatic_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      debian_buster_nonstatic_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      debian_buster_nonstatic_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      debian_buster_nonstatic_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      debian_buster_nonstatic_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      debian_buster_nonstatic_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      debian_buster_nonstatic_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      debian_buster_nonstatic_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      debian_buster_nonstatic_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      debian_buster_nonstatic_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      debian_buster_nonstatic_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      debian_buster_nonstatic_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      debian_buster_nonstatic_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      debian_buster_nonstatic_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      debian_buster_nonstatic_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      debian_buster_nonstatic_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      debian_buster_nonstatic_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      debian_buster_nonstatic_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      debian_buster_nonstatic_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      debian_buster_nonstatic_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      debian_buster_nonstatic_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      debian_buster_nonstatic_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      debian_buster_nonstatic_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      debian_buster_nonstatic_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      debian_buster_nonstatic_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      debian_buster_nonstatic_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      debian_buster_nonstatic_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      debian_buster_nonstatic_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      debian_buster_nonstatic_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      debian_buster_nonstatic_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      debian_buster_nonstatic_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      debian_buster_nonstatic_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      debian_buster_nonstatic_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd debian-buster
      docker build --pull --no-cache -t rippled/debian-buster .
      docker run --rm -t rippled/debian-buster /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=OFF $TEST_PY_OPTS"
- job: debian_sid_static_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: debian_sid_static_smoketest
  condition: succeeded()
  strategy:
    matrix:
      debian_sid_static_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      debian_sid_static_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      debian_sid_static_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      debian_sid_static_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      debian_sid_static_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      debian_sid_static_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      debian_sid_static_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      debian_sid_static_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      debian_sid_static_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      debian_sid_static_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      debian_sid_static_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      debian_sid_static_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      debian_sid_static_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      debian_sid_static_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      debian_sid_static_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      debian_sid_static_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      debian_sid_static_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      debian_sid_static_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      debian_sid_static_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      debian_sid_static_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      debian_sid_static_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      debian_sid_static_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      debian_sid_static_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      debian_sid_static_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      debian_sid_static_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      debian_sid_static_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      debian_sid_static_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      debian_sid_static_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      debian_sid_static_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      debian_sid_static_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      debian_sid_static_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      debian_sid_static_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      debian_sid_static_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      debian_sid_static_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      debian_sid_static_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      debian_sid_static_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      debian_sid_static_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      debian_sid_static_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      debian_sid_static_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      debian_sid_static_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd debian-sid
      docker build --pull --no-cache -t rippled/debian-sid .
      docker run --rm -t rippled/debian-sid /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=ON $TEST_PY_OPTS"
- job: debian_sid_nonstatic_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: debian_sid_nonstatic_smoketest
  condition: succeeded()
  strategy:
    matrix:
      debian_sid_nonstatic_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      debian_sid_nonstatic_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      debian_sid_nonstatic_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      debian_sid_nonstatic_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      debian_sid_nonstatic_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      debian_sid_nonstatic_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      debian_sid_nonstatic_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      debian_sid_nonstatic_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      debian_sid_nonstatic_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      debian_sid_nonstatic_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      debian_sid_nonstatic_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      debian_sid_nonstatic_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      debian_sid_nonstatic_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      debian_sid_nonstatic_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      debian_sid_nonstatic_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      debian_sid_nonstatic_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      debian_sid_nonstatic_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      debian_sid_nonstatic_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      debian_sid_nonstatic_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      debian_sid_nonstatic_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      debian_sid_nonstatic_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      debian_sid_nonstatic_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      debian_sid_nonstatic_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      debian_sid_nonstatic_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      debian_sid_nonstatic_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      debian_sid_nonstatic_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      debian_sid_nonstatic_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      debian_sid_nonstatic_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      debian_sid_nonstatic_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      debian_sid_nonstatic_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      debian_sid_nonstatic_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      debian_sid_nonstatic_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      debian_sid_nonstatic_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      debian_sid_nonstatic_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      debian_sid_nonstatic_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      debian_sid_nonstatic_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      debian_sid_nonstatic_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      debian_sid_nonstatic_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      debian_sid_nonstatic_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      debian_sid_nonstatic_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd debian-sid
      docker build --pull --no-cache -t rippled/debian-sid .
      docker run --rm -t rippled/debian-sid /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=OFF $TEST_PY_OPTS"
- job: fedora_28_static_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: fedora_28_static_smoketest
  condition: succeeded()
  strategy:
    matrix:
      fedora_28_static_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      fedora_28_static_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      fedora_28_static_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      fedora_28_static_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      fedora_28_static_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      fedora_28_static_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      fedora_28_static_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      fedora_28_static_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      fedora_28_static_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      fedora_28_static_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      fedora_28_static_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      fedora_28_static_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      fedora_28_static_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      fedora_28_static_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      fedora_28_static_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      fedora_28_static_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      fedora_28_static_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      fedora_28_static_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      fedora_28_static_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      fedora_28_static_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      fedora_28_static_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      fedora_28_static_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      fedora_28_static_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      fedora_28_static_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      fedora_28_static_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      fedora_28_static_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      fedora_28_static_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      fedora_28_static_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      fedora_28_static_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      fedora_28_static_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      fedora_28_static_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      fedora_28_static_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      fedora_28_static_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      fedora_28_static_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      fedora_28_static_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      fedora_28_static_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      fedora_28_static_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      fedora_28_static_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      fedora_28_static_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      fedora_28_static_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd fedora-28
      docker build --pull --no-cache -t rippled/fedora-28 .
      docker run --rm -t rippled/fedora-28 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=ON $TEST_PY_OPTS"
- job: fedora_28_nonstatic_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: fedora_28_nonstatic_smoketest
  condition: succeeded()
  strategy:
    matrix:
      fedora_28_nonstatic_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      fedora_28_nonstatic_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      fedora_28_nonstatic_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      fedora_28_nonstatic_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      fedora_28_nonstatic_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      fedora_28_nonstatic_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      fedora_28_nonstatic_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      fedora_28_nonstatic_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      fedora_28_nonstatic_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      fedora_28_nonstatic_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      fedora_28_nonstatic_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      fedora_28_nonstatic_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      fedora_28_nonstatic_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      fedora_28_nonstatic_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      fedora_28_nonstatic_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      fedora_28_nonstatic_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      fedora_28_nonstatic_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      fedora_28_nonstatic_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      fedora_28_nonstatic_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      fedora_28_nonstatic_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      fedora_28_nonstatic_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      fedora_28_nonstatic_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      fedora_28_nonstatic_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      fedora_28_nonstatic_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      fedora_28_nonstatic_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      fedora_28_nonstatic_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      fedora_28_nonstatic_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      fedora_28_nonstatic_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      fedora_28_nonstatic_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      fedora_28_nonstatic_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      fedora_28_nonstatic_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      fedora_28_nonstatic_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      fedora_28_nonstatic_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      fedora_28_nonstatic_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      fedora_28_nonstatic_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      fedora_28_nonstatic_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      fedora_28_nonstatic_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      fedora_28_nonstatic_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      fedora_28_nonstatic_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      fedora_28_nonstatic_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd fedora-28
      docker build --pull --no-cache -t rippled/fedora-28 .
      docker run --rm -t rippled/fedora-28 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=OFF $TEST_PY_OPTS"
- job: fedora_29_static_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: fedora_29_static_smoketest
  condition: succeeded()
  strategy:
    matrix:
      fedora_29_static_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      fedora_29_static_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      fedora_29_static_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      fedora_29_static_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      fedora_29_static_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      fedora_29_static_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      fedora_29_static_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      fedora_29_static_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      fedora_29_static_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      fedora_29_static_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      fedora_29_static_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      fedora_29_static_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      fedora_29_static_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      fedora_29_static_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      fedora_29_static_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      fedora_29_static_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      fedora_29_static_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      fedora_29_static_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      fedora_29_static_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      fedora_29_static_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      fedora_29_static_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      fedora_29_static_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      fedora_29_static_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      fedora_29_static_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      fedora_29_static_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      fedora_29_static_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      fedora_29_static_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      fedora_29_static_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      fedora_29_static_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      fedora_29_static_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      fedora_29_static_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      fedora_29_static_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      fedora_29_static_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      fedora_29_static_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      fedora_29_static_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      fedora_29_static_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      fedora_29_static_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      fedora_29_static_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      fedora_29_static_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      fedora_29_static_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd fedora-29
      docker build --pull --no-cache -t rippled/fedora-29 .
      docker run --rm -t rippled/fedora-29 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=ON $TEST_PY_OPTS"
- job: fedora_29_nonstatic_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: fedora_29_nonstatic_smoketest
  condition: succeeded()
  strategy:
    matrix:
      fedora_29_nonstatic_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      fedora_29_nonstatic_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      fedora_29_nonstatic_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      fedora_29_nonstatic_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      fedora_29_nonstatic_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      fedora_29_nonstatic_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      fedora_29_nonstatic_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      fedora_29_nonstatic_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      fedora_29_nonstatic_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      fedora_29_nonstatic_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      fedora_29_nonstatic_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      fedora_29_nonstatic_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      fedora_29_nonstatic_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      fedora_29_nonstatic_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      fedora_29_nonstatic_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      fedora_29_nonstatic_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      fedora_29_nonstatic_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      fedora_29_nonstatic_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      fedora_29_nonstatic_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      fedora_29_nonstatic_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      fedora_29_nonstatic_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      fedora_29_nonstatic_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      fedora_29_nonstatic_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      fedora_29_nonstatic_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      fedora_29_nonstatic_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      fedora_29_nonstatic_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      fedora_29_nonstatic_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      fedora_29_nonstatic_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      fedora_29_nonstatic_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      fedora_29_nonstatic_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      fedora_29_nonstatic_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      fedora_29_nonstatic_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      fedora_29_nonstatic_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      fedora_29_nonstatic_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      fedora_29_nonstatic_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      fedora_29_nonstatic_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      fedora_29_nonstatic_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      fedora_29_nonstatic_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      fedora_29_nonstatic_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      fedora_29_nonstatic_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd fedora-29
      docker build --pull --no-cache -t rippled/fedora-29 .
      docker run --rm -t rippled/fedora-29 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=OFF $TEST_PY_OPTS"
- job: fedora_30_static_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: fedora_30_static_smoketest
  condition: succeeded()
  strategy:
    matrix:
      fedora_30_static_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      fedora_30_static_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      fedora_30_static_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      fedora_30_static_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      fedora_30_static_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      fedora_30_static_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      fedora_30_static_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      fedora_30_static_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      fedora_30_static_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      fedora_30_static_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      fedora_30_static_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      fedora_30_static_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      fedora_30_static_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      fedora_30_static_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      fedora_30_static_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      fedora_30_static_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      fedora_30_static_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      fedora_30_static_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      fedora_30_static_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      fedora_30_static_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      fedora_30_static_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      fedora_30_static_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      fedora_30_static_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      fedora_30_static_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      fedora_30_static_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      fedora_30_static_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      fedora_30_static_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      fedora_30_static_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      fedora_30_static_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      fedora_30_static_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      fedora_30_static_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      fedora_30_static_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      fedora_30_static_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      fedora_30_static_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      fedora_30_static_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      fedora_30_static_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      fedora_30_static_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      fedora_30_static_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      fedora_30_static_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      fedora_30_static_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd fedora-30
      docker build --pull --no-cache -t rippled/fedora-30 .
      docker run --rm -t rippled/fedora-30 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=ON $TEST_PY_OPTS"
- job: fedora_30_nonstatic_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: fedora_30_nonstatic_smoketest
  condition: succeeded()
  strategy:
    matrix:
      fedora_30_nonstatic_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      fedora_30_nonstatic_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      fedora_30_nonstatic_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      fedora_30_nonstatic_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      fedora_30_nonstatic_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      fedora_30_nonstatic_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      fedora_30_nonstatic_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      fedora_30_nonstatic_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      fedora_30_nonstatic_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      fedora_30_nonstatic_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      fedora_30_nonstatic_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      fedora_30_nonstatic_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      fedora_30_nonstatic_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      fedora_30_nonstatic_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      fedora_30_nonstatic_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      fedora_30_nonstatic_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      fedora_30_nonstatic_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      fedora_30_nonstatic_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      fedora_30_nonstatic_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      fedora_30_nonstatic_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      fedora_30_nonstatic_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      fedora_30_nonstatic_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      fedora_30_nonstatic_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      fedora_30_nonstatic_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      fedora_30_nonstatic_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      fedora_30_nonstatic_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      fedora_30_nonstatic_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      fedora_30_nonstatic_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      fedora_30_nonstatic_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      fedora_30_nonstatic_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      fedora_30_nonstatic_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      fedora_30_nonstatic_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      fedora_30_nonstatic_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      fedora_30_nonstatic_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      fedora_30_nonstatic_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      fedora_30_nonstatic_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      fedora_30_nonstatic_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      fedora_30_nonstatic_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      fedora_30_nonstatic_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      fedora_30_nonstatic_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd fedora-30
      docker build --pull --no-cache -t rippled/fedora-30 .
      docker run --rm -t rippled/fedora-30 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=OFF $TEST_PY_OPTS"
- job: fedora_rawhide_static_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: fedora_rawhide_static_smoketest
  condition: succeeded()
  strategy:
    matrix:
      fedora_rawhide_static_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      fedora_rawhide_static_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      fedora_rawhide_static_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      fedora_rawhide_static_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      fedora_rawhide_static_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      fedora_rawhide_static_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      fedora_rawhide_static_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      fedora_rawhide_static_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      fedora_rawhide_static_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      fedora_rawhide_static_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      fedora_rawhide_static_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      fedora_rawhide_static_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      fedora_rawhide_static_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      fedora_rawhide_static_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      fedora_rawhide_static_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      fedora_rawhide_static_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      fedora_rawhide_static_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      fedora_rawhide_static_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      fedora_rawhide_static_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      fedora_rawhide_static_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      fedora_rawhide_static_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      fedora_rawhide_static_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      fedora_rawhide_static_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      fedora_rawhide_static_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      fedora_rawhide_static_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      fedora_rawhide_static_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      fedora_rawhide_static_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      fedora_rawhide_static_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      fedora_rawhide_static_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      fedora_rawhide_static_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      fedora_rawhide_static_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      fedora_rawhide_static_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      fedora_rawhide_static_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      fedora_rawhide_static_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      fedora_rawhide_static_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      fedora_rawhide_static_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      fedora_rawhide_static_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      fedora_rawhide_static_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      fedora_rawhide_static_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      fedora_rawhide_static_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd fedora-rawhide
      docker build --pull --no-cache -t rippled/fedora-rawhide .
      docker run --rm -t rippled/fedora-rawhide /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=ON $TEST_PY_OPTS"
- job: fedora_rawhide_nonstatic_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: fedora_rawhide_nonstatic_smoketest
  condition: succeeded()
  strategy:
    matrix:
      fedora_rawhide_nonstatic_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      fedora_rawhide_nonstatic_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      fedora_rawhide_nonstatic_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      fedora_rawhide_nonstatic_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      fedora_rawhide_nonstatic_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      fedora_rawhide_nonstatic_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      fedora_rawhide_nonstatic_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      fedora_rawhide_nonstatic_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      fedora_rawhide_nonstatic_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      fedora_rawhide_nonstatic_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      fedora_rawhide_nonstatic_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      fedora_rawhide_nonstatic_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      fedora_rawhide_nonstatic_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      fedora_rawhide_nonstatic_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      fedora_rawhide_nonstatic_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      fedora_rawhide_nonstatic_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      fedora_rawhide_nonstatic_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      fedora_rawhide_nonstatic_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      fedora_rawhide_nonstatic_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      fedora_rawhide_nonstatic_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      fedora_rawhide_nonstatic_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      fedora_rawhide_nonstatic_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      fedora_rawhide_nonstatic_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      fedora_rawhide_nonstatic_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      fedora_rawhide_nonstatic_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      fedora_rawhide_nonstatic_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      fedora_rawhide_nonstatic_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      fedora_rawhide_nonstatic_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      fedora_rawhide_nonstatic_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      fedora_rawhide_nonstatic_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      fedora_rawhide_nonstatic_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      fedora_rawhide_nonstatic_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      fedora_rawhide_nonstatic_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      fedora_rawhide_nonstatic_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      fedora_rawhide_nonstatic_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      fedora_rawhide_nonstatic_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      fedora_rawhide_nonstatic_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      fedora_rawhide_nonstatic_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      fedora_rawhide_nonstatic_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      fedora_rawhide_nonstatic_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd fedora-rawhide
      docker build --pull --no-cache -t rippled/fedora-rawhide .
      docker run --rm -t rippled/fedora-rawhide /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=OFF $TEST_PY_OPTS"
- job: opensuse_leap_42_static_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: opensuse_leap_42_static_smoketest
  condition: succeeded()
  strategy:
    matrix:
      opensuse_leap_42_static_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      opensuse_leap_42_static_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      opensuse_leap_42_static_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      opensuse_leap_42_static_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      opensuse_leap_42_static_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      opensuse_leap_42_static_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      opensuse_leap_42_static_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      opensuse_leap_42_static_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      opensuse_leap_42_static_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      opensuse_leap_42_static_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      opensuse_leap_42_static_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      opensuse_leap_42_static_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      opensuse_leap_42_static_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      opensuse_leap_42_static_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      opensuse_leap_42_static_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      opensuse_leap_42_static_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      opensuse_leap_42_static_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      opensuse_leap_42_static_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      opensuse_leap_42_static_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      opensuse_leap_42_static_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      opensuse_leap_42_static_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      opensuse_leap_42_static_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      opensuse_leap_42_static_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      opensuse_leap_42_static_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      opensuse_leap_42_static_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      opensuse_leap_42_static_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      opensuse_leap_42_static_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      opensuse_leap_42_static_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      opensuse_leap_42_static_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      opensuse_leap_42_static_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      opensuse_leap_42_static_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      opensuse_leap_42_static_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      opensuse_leap_42_static_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      opensuse_leap_42_static_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      opensuse_leap_42_static_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      opensuse_leap_42_static_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      opensuse_leap_42_static_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      opensuse_leap_42_static_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      opensuse_leap_42_static_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      opensuse_leap_42_static_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd opensuse-leap-42
      docker build --pull --no-cache -t rippled/opensuse-leap-42 .
      docker run --rm -t rippled/opensuse-leap-42 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=ON $TEST_PY_OPTS"
- job: opensuse_leap_42_nonstatic_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: opensuse_leap_42_nonstatic_smoketest
  condition: succeeded()
  strategy:
    matrix:
      opensuse_leap_42_nonstatic_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      opensuse_leap_42_nonstatic_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      opensuse_leap_42_nonstatic_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      opensuse_leap_42_nonstatic_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      opensuse_leap_42_nonstatic_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      opensuse_leap_42_nonstatic_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      opensuse_leap_42_nonstatic_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      opensuse_leap_42_nonstatic_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      opensuse_leap_42_nonstatic_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      opensuse_leap_42_nonstatic_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      opensuse_leap_42_nonstatic_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      opensuse_leap_42_nonstatic_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      opensuse_leap_42_nonstatic_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      opensuse_leap_42_nonstatic_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      opensuse_leap_42_nonstatic_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      opensuse_leap_42_nonstatic_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      opensuse_leap_42_nonstatic_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      opensuse_leap_42_nonstatic_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      opensuse_leap_42_nonstatic_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      opensuse_leap_42_nonstatic_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      opensuse_leap_42_nonstatic_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      opensuse_leap_42_nonstatic_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      opensuse_leap_42_nonstatic_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      opensuse_leap_42_nonstatic_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      opensuse_leap_42_nonstatic_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      opensuse_leap_42_nonstatic_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      opensuse_leap_42_nonstatic_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      opensuse_leap_42_nonstatic_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      opensuse_leap_42_nonstatic_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      opensuse_leap_42_nonstatic_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      opensuse_leap_42_nonstatic_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      opensuse_leap_42_nonstatic_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      opensuse_leap_42_nonstatic_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      opensuse_leap_42_nonstatic_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      opensuse_leap_42_nonstatic_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      opensuse_leap_42_nonstatic_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      opensuse_leap_42_nonstatic_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      opensuse_leap_42_nonstatic_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      opensuse_leap_42_nonstatic_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      opensuse_leap_42_nonstatic_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd opensuse-leap-42
      docker build --pull --no-cache -t rippled/opensuse-leap-42 .
      docker run --rm -t rippled/opensuse-leap-42 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=OFF $TEST_PY_OPTS"
- job: opensuse_leap_15_static_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: opensuse_leap_15_static_smoketest
  condition: succeeded()
  strategy:
    matrix:
      opensuse_leap_15_static_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      opensuse_leap_15_static_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      opensuse_leap_15_static_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      opensuse_leap_15_static_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      opensuse_leap_15_static_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      opensuse_leap_15_static_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      opensuse_leap_15_static_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      opensuse_leap_15_static_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      opensuse_leap_15_static_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      opensuse_leap_15_static_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      opensuse_leap_15_static_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      opensuse_leap_15_static_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      opensuse_leap_15_static_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      opensuse_leap_15_static_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      opensuse_leap_15_static_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      opensuse_leap_15_static_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      opensuse_leap_15_static_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      opensuse_leap_15_static_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      opensuse_leap_15_static_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      opensuse_leap_15_static_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      opensuse_leap_15_static_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      opensuse_leap_15_static_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      opensuse_leap_15_static_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      opensuse_leap_15_static_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      opensuse_leap_15_static_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      opensuse_leap_15_static_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      opensuse_leap_15_static_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      opensuse_leap_15_static_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      opensuse_leap_15_static_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      opensuse_leap_15_static_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      opensuse_leap_15_static_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      opensuse_leap_15_static_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      opensuse_leap_15_static_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      opensuse_leap_15_static_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      opensuse_leap_15_static_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      opensuse_leap_15_static_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      opensuse_leap_15_static_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      opensuse_leap_15_static_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      opensuse_leap_15_static_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      opensuse_leap_15_static_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd opensuse-leap-15
      docker build --pull --no-cache -t rippled/opensuse-leap-15 .
      docker run --rm -t rippled/opensuse-leap-15 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=ON $TEST_PY_OPTS"
- job: opensuse_leap_15_nonstatic_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: opensuse_leap_15_nonstatic_smoketest
  condition: succeeded()
  strategy:
    matrix:
      opensuse_leap_15_nonstatic_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      opensuse_leap_15_nonstatic_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      opensuse_leap_15_nonstatic_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      opensuse_leap_15_nonstatic_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      opensuse_leap_15_nonstatic_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      opensuse_leap_15_nonstatic_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      opensuse_leap_15_nonstatic_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      opensuse_leap_15_nonstatic_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      opensuse_leap_15_nonstatic_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      opensuse_leap_15_nonstatic_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      opensuse_leap_15_nonstatic_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      opensuse_leap_15_nonstatic_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      opensuse_leap_15_nonstatic_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      opensuse_leap_15_nonstatic_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      opensuse_leap_15_nonstatic_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      opensuse_leap_15_nonstatic_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      opensuse_leap_15_nonstatic_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      opensuse_leap_15_nonstatic_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      opensuse_leap_15_nonstatic_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      opensuse_leap_15_nonstatic_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      opensuse_leap_15_nonstatic_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      opensuse_leap_15_nonstatic_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      opensuse_leap_15_nonstatic_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      opensuse_leap_15_nonstatic_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      opensuse_leap_15_nonstatic_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      opensuse_leap_15_nonstatic_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      opensuse_leap_15_nonstatic_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      opensuse_leap_15_nonstatic_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      opensuse_leap_15_nonstatic_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      opensuse_leap_15_nonstatic_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      opensuse_leap_15_nonstatic_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      opensuse_leap_15_nonstatic_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      opensuse_leap_15_nonstatic_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      opensuse_leap_15_nonstatic_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      opensuse_leap_15_nonstatic_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      opensuse_leap_15_nonstatic_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      opensuse_leap_15_nonstatic_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      opensuse_leap_15_nonstatic_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      opensuse_leap_15_nonstatic_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      opensuse_leap_15_nonstatic_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd opensuse-leap-15
      docker build --pull --no-cache -t rippled/opensuse-leap-15 .
      docker run --rm -t rippled/opensuse-leap-15 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=OFF $TEST_PY_OPTS"
- job: opensuse_tumbleweed_static_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: opensuse_tumbleweed_static_smoketest
  condition: succeeded()
  strategy:
    matrix:
      opensuse_tumbleweed_static_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      opensuse_tumbleweed_static_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      opensuse_tumbleweed_static_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      opensuse_tumbleweed_static_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      opensuse_tumbleweed_static_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      opensuse_tumbleweed_static_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      opensuse_tumbleweed_static_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      opensuse_tumbleweed_static_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      opensuse_tumbleweed_static_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      opensuse_tumbleweed_static_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      opensuse_tumbleweed_static_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      opensuse_tumbleweed_static_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      opensuse_tumbleweed_static_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      opensuse_tumbleweed_static_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      opensuse_tumbleweed_static_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      opensuse_tumbleweed_static_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      opensuse_tumbleweed_static_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      opensuse_tumbleweed_static_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      opensuse_tumbleweed_static_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      opensuse_tumbleweed_static_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      opensuse_tumbleweed_static_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      opensuse_tumbleweed_static_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      opensuse_tumbleweed_static_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      opensuse_tumbleweed_static_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      opensuse_tumbleweed_static_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      opensuse_tumbleweed_static_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      opensuse_tumbleweed_static_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      opensuse_tumbleweed_static_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      opensuse_tumbleweed_static_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      opensuse_tumbleweed_static_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      opensuse_tumbleweed_static_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      opensuse_tumbleweed_static_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      opensuse_tumbleweed_static_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      opensuse_tumbleweed_static_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      opensuse_tumbleweed_static_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      opensuse_tumbleweed_static_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      opensuse_tumbleweed_static_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      opensuse_tumbleweed_static_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      opensuse_tumbleweed_static_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      opensuse_tumbleweed_static_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd opensuse-tumbleweed
      docker build --pull --no-cache -t rippled/opensuse-tumbleweed .
      docker run --rm -t rippled/opensuse-tumbleweed /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=ON $TEST_PY_OPTS"
- job: opensuse_tumbleweed_nonstatic_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: opensuse_tumbleweed_nonstatic_smoketest
  condition: succeeded()
  strategy:
    matrix:
      opensuse_tumbleweed_nonstatic_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      opensuse_tumbleweed_nonstatic_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      opensuse_tumbleweed_nonstatic_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      opensuse_tumbleweed_nonstatic_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      opensuse_tumbleweed_nonstatic_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      opensuse_tumbleweed_nonstatic_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      opensuse_tumbleweed_nonstatic_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      opensuse_tumbleweed_nonstatic_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      opensuse_tumbleweed_nonstatic_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      opensuse_tumbleweed_nonstatic_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      opensuse_tumbleweed_nonstatic_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      opensuse_tumbleweed_nonstatic_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      opensuse_tumbleweed_nonstatic_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      opensuse_tumbleweed_nonstatic_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      opensuse_tumbleweed_nonstatic_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      opensuse_tumbleweed_nonstatic_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      opensuse_tumbleweed_nonstatic_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      opensuse_tumbleweed_nonstatic_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      opensuse_tumbleweed_nonstatic_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      opensuse_tumbleweed_nonstatic_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      opensuse_tumbleweed_nonstatic_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      opensuse_tumbleweed_nonstatic_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      opensuse_tumbleweed_nonstatic_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      opensuse_tumbleweed_nonstatic_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      opensuse_tumbleweed_nonstatic_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      opensuse_tumbleweed_nonstatic_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      opensuse_tumbleweed_nonstatic_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      opensuse_tumbleweed_nonstatic_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      opensuse_tumbleweed_nonstatic_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      opensuse_tumbleweed_nonstatic_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      opensuse_tumbleweed_nonstatic_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      opensuse_tumbleweed_nonstatic_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      opensuse_tumbleweed_nonstatic_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      opensuse_tumbleweed_nonstatic_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      opensuse_tumbleweed_nonstatic_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      opensuse_tumbleweed_nonstatic_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      opensuse_tumbleweed_nonstatic_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      opensuse_tumbleweed_nonstatic_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      opensuse_tumbleweed_nonstatic_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      opensuse_tumbleweed_nonstatic_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd opensuse-tumbleweed
      docker build --pull --no-cache -t rippled/opensuse-tumbleweed .
      docker run --rm -t rippled/opensuse-tumbleweed /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=OFF $TEST_PY_OPTS"
- job: ubuntu_16_04_static_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: ubuntu_16_04_static_smoketest
  condition: succeeded()
  strategy:
    matrix:
      ubuntu_16_04_static_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      ubuntu_16_04_static_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      ubuntu_16_04_static_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      ubuntu_16_04_static_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      ubuntu_16_04_static_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      ubuntu_16_04_static_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      ubuntu_16_04_static_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      ubuntu_16_04_static_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      ubuntu_16_04_static_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      ubuntu_16_04_static_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      ubuntu_16_04_static_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      ubuntu_16_04_static_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      ubuntu_16_04_static_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      ubuntu_16_04_static_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      ubuntu_16_04_static_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      ubuntu_16_04_static_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      ubuntu_16_04_static_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      ubuntu_16_04_static_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      ubuntu_16_04_static_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      ubuntu_16_04_static_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      ubuntu_16_04_static_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      ubuntu_16_04_static_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      ubuntu_16_04_static_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      ubuntu_16_04_static_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      ubuntu_16_04_static_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      ubuntu_16_04_static_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      ubuntu_16_04_static_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      ubuntu_16_04_static_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      ubuntu_16_04_static_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      ubuntu_16_04_static_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      ubuntu_16_04_static_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      ubuntu_16_04_static_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      ubuntu_16_04_static_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      ubuntu_16_04_static_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      ubuntu_16_04_static_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      ubuntu_16_04_static_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      ubuntu_16_04_static_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      ubuntu_16_04_static_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      ubuntu_16_04_static_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      ubuntu_16_04_static_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd ubuntu-16.04
      docker build --pull --no-cache -t rippled/ubuntu-16.04 .
      docker run --rm -t rippled/ubuntu-16.04 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=ON $TEST_PY_OPTS"
- job: ubuntu_16_04_nonstatic_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: ubuntu_16_04_nonstatic_smoketest
  condition: succeeded()
  strategy:
    matrix:
      ubuntu_16_04_nonstatic_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      ubuntu_16_04_nonstatic_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      ubuntu_16_04_nonstatic_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      ubuntu_16_04_nonstatic_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      ubuntu_16_04_nonstatic_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      ubuntu_16_04_nonstatic_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      ubuntu_16_04_nonstatic_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      ubuntu_16_04_nonstatic_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      ubuntu_16_04_nonstatic_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      ubuntu_16_04_nonstatic_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      ubuntu_16_04_nonstatic_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      ubuntu_16_04_nonstatic_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      ubuntu_16_04_nonstatic_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      ubuntu_16_04_nonstatic_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      ubuntu_16_04_nonstatic_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      ubuntu_16_04_nonstatic_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      ubuntu_16_04_nonstatic_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      ubuntu_16_04_nonstatic_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      ubuntu_16_04_nonstatic_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      ubuntu_16_04_nonstatic_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      ubuntu_16_04_nonstatic_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      ubuntu_16_04_nonstatic_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      ubuntu_16_04_nonstatic_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      ubuntu_16_04_nonstatic_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      ubuntu_16_04_nonstatic_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      ubuntu_16_04_nonstatic_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      ubuntu_16_04_nonstatic_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      ubuntu_16_04_nonstatic_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      ubuntu_16_04_nonstatic_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      ubuntu_16_04_nonstatic_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      ubuntu_16_04_nonstatic_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      ubuntu_16_04_nonstatic_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      ubuntu_16_04_nonstatic_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      ubuntu_16_04_nonstatic_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      ubuntu_16_04_nonstatic_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      ubuntu_16_04_nonstatic_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      ubuntu_16_04_nonstatic_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      ubuntu_16_04_nonstatic_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      ubuntu_16_04_nonstatic_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      ubuntu_16_04_nonstatic_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd ubuntu-16.04
      docker build --pull --no-cache -t rippled/ubuntu-16.04 .
      docker run --rm -t rippled/ubuntu-16.04 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=OFF $TEST_PY_OPTS"
- job: ubuntu_18_04_static_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: ubuntu_18_04_static_smoketest
  condition: succeeded()
  strategy:
    matrix:
      ubuntu_18_04_static_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      ubuntu_18_04_static_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      ubuntu_18_04_static_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      ubuntu_18_04_static_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      ubuntu_18_04_static_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      ubuntu_18_04_static_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      ubuntu_18_04_static_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      ubuntu_18_04_static_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      ubuntu_18_04_static_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      ubuntu_18_04_static_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      ubuntu_18_04_static_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      ubuntu_18_04_static_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      ubuntu_18_04_static_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      ubuntu_18_04_static_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      ubuntu_18_04_static_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      ubuntu_18_04_static_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      ubuntu_18_04_static_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      ubuntu_18_04_static_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      ubuntu_18_04_static_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      ubuntu_18_04_static_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      ubuntu_18_04_static_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      ubuntu_18_04_static_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      ubuntu_18_04_static_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      ubuntu_18_04_static_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      ubuntu_18_04_static_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      ubuntu_18_04_static_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      ubuntu_18_04_static_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      ubuntu_18_04_static_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      ubuntu_18_04_static_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      ubuntu_18_04_static_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      ubuntu_18_04_static_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      ubuntu_18_04_static_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      ubuntu_18_04_static_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      ubuntu_18_04_static_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      ubuntu_18_04_static_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      ubuntu_18_04_static_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      ubuntu_18_04_static_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      ubuntu_18_04_static_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      ubuntu_18_04_static_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      ubuntu_18_04_static_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd ubuntu-18.04
      docker build --pull --no-cache -t rippled/ubuntu-18.04 .
      docker run --rm -t rippled/ubuntu-18.04 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=ON $TEST_PY_OPTS"
- job: ubuntu_18_04_nonstatic_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: ubuntu_18_04_nonstatic_smoketest
  condition: succeeded()
  strategy:
    matrix:
      ubuntu_18_04_nonstatic_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      ubuntu_18_04_nonstatic_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      ubuntu_18_04_nonstatic_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      ubuntu_18_04_nonstatic_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      ubuntu_18_04_nonstatic_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      ubuntu_18_04_nonstatic_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      ubuntu_18_04_nonstatic_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      ubuntu_18_04_nonstatic_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      ubuntu_18_04_nonstatic_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      ubuntu_18_04_nonstatic_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      ubuntu_18_04_nonstatic_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      ubuntu_18_04_nonstatic_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      ubuntu_18_04_nonstatic_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      ubuntu_18_04_nonstatic_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      ubuntu_18_04_nonstatic_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      ubuntu_18_04_nonstatic_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      ubuntu_18_04_nonstatic_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      ubuntu_18_04_nonstatic_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      ubuntu_18_04_nonstatic_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      ubuntu_18_04_nonstatic_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      ubuntu_18_04_nonstatic_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      ubuntu_18_04_nonstatic_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      ubuntu_18_04_nonstatic_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      ubuntu_18_04_nonstatic_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      ubuntu_18_04_nonstatic_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      ubuntu_18_04_nonstatic_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      ubuntu_18_04_nonstatic_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      ubuntu_18_04_nonstatic_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      ubuntu_18_04_nonstatic_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      ubuntu_18_04_nonstatic_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      ubuntu_18_04_nonstatic_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      ubuntu_18_04_nonstatic_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      ubuntu_18_04_nonstatic_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      ubuntu_18_04_nonstatic_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      ubuntu_18_04_nonstatic_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      ubuntu_18_04_nonstatic_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      ubuntu_18_04_nonstatic_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      ubuntu_18_04_nonstatic_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      ubuntu_18_04_nonstatic_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      ubuntu_18_04_nonstatic_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd ubuntu-18.04
      docker build --pull --no-cache -t rippled/ubuntu-18.04 .
      docker run --rm -t rippled/ubuntu-18.04 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=OFF $TEST_PY_OPTS"
- job: ubuntu_18_10_static_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: ubuntu_18_10_static_smoketest
  condition: succeeded()
  strategy:
    matrix:
      ubuntu_18_10_static_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      ubuntu_18_10_static_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      ubuntu_18_10_static_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      ubuntu_18_10_static_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      ubuntu_18_10_static_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      ubuntu_18_10_static_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      ubuntu_18_10_static_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      ubuntu_18_10_static_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      ubuntu_18_10_static_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      ubuntu_18_10_static_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      ubuntu_18_10_static_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      ubuntu_18_10_static_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      ubuntu_18_10_static_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      ubuntu_18_10_static_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      ubuntu_18_10_static_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      ubuntu_18_10_static_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      ubuntu_18_10_static_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      ubuntu_18_10_static_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      ubuntu_18_10_static_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      ubuntu_18_10_static_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      ubuntu_18_10_static_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      ubuntu_18_10_static_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      ubuntu_18_10_static_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      ubuntu_18_10_static_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      ubuntu_18_10_static_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      ubuntu_18_10_static_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      ubuntu_18_10_static_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      ubuntu_18_10_static_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      ubuntu_18_10_static_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      ubuntu_18_10_static_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      ubuntu_18_10_static_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      ubuntu_18_10_static_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      ubuntu_18_10_static_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      ubuntu_18_10_static_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      ubuntu_18_10_static_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      ubuntu_18_10_static_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      ubuntu_18_10_static_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      ubuntu_18_10_static_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      ubuntu_18_10_static_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      ubuntu_18_10_static_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd ubuntu-18.10
      docker build --pull --no-cache -t rippled/ubuntu-18.10 .
      docker run --rm -t rippled/ubuntu-18.10 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=ON $TEST_PY_OPTS"
- job: ubuntu_18_10_nonstatic_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: ubuntu_18_10_nonstatic_smoketest
  condition: succeeded()
  strategy:
    matrix:
      ubuntu_18_10_nonstatic_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      ubuntu_18_10_nonstatic_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      ubuntu_18_10_nonstatic_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      ubuntu_18_10_nonstatic_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      ubuntu_18_10_nonstatic_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      ubuntu_18_10_nonstatic_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      ubuntu_18_10_nonstatic_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      ubuntu_18_10_nonstatic_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      ubuntu_18_10_nonstatic_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      ubuntu_18_10_nonstatic_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      ubuntu_18_10_nonstatic_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      ubuntu_18_10_nonstatic_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      ubuntu_18_10_nonstatic_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      ubuntu_18_10_nonstatic_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      ubuntu_18_10_nonstatic_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      ubuntu_18_10_nonstatic_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      ubuntu_18_10_nonstatic_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      ubuntu_18_10_nonstatic_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      ubuntu_18_10_nonstatic_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      ubuntu_18_10_nonstatic_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      ubuntu_18_10_nonstatic_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      ubuntu_18_10_nonstatic_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      ubuntu_18_10_nonstatic_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      ubuntu_18_10_nonstatic_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      ubuntu_18_10_nonstatic_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      ubuntu_18_10_nonstatic_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      ubuntu_18_10_nonstatic_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      ubuntu_18_10_nonstatic_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      ubuntu_18_10_nonstatic_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      ubuntu_18_10_nonstatic_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      ubuntu_18_10_nonstatic_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      ubuntu_18_10_nonstatic_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      ubuntu_18_10_nonstatic_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      ubuntu_18_10_nonstatic_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      ubuntu_18_10_nonstatic_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      ubuntu_18_10_nonstatic_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      ubuntu_18_10_nonstatic_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      ubuntu_18_10_nonstatic_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      ubuntu_18_10_nonstatic_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      ubuntu_18_10_nonstatic_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd ubuntu-18.10
      docker build --pull --no-cache -t rippled/ubuntu-18.10 .
      docker run --rm -t rippled/ubuntu-18.10 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=OFF $TEST_PY_OPTS"
- job: ubuntu_19_04_static_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: ubuntu_19_04_static_smoketest
  condition: succeeded()
  strategy:
    matrix:
      ubuntu_19_04_static_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      ubuntu_19_04_static_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      ubuntu_19_04_static_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      ubuntu_19_04_static_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      ubuntu_19_04_static_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      ubuntu_19_04_static_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      ubuntu_19_04_static_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      ubuntu_19_04_static_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      ubuntu_19_04_static_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      ubuntu_19_04_static_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      ubuntu_19_04_static_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      ubuntu_19_04_static_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      ubuntu_19_04_static_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      ubuntu_19_04_static_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      ubuntu_19_04_static_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      ubuntu_19_04_static_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      ubuntu_19_04_static_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      ubuntu_19_04_static_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      ubuntu_19_04_static_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      ubuntu_19_04_static_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      ubuntu_19_04_static_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      ubuntu_19_04_static_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      ubuntu_19_04_static_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      ubuntu_19_04_static_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      ubuntu_19_04_static_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      ubuntu_19_04_static_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      ubuntu_19_04_static_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      ubuntu_19_04_static_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      ubuntu_19_04_static_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      ubuntu_19_04_static_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      ubuntu_19_04_static_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      ubuntu_19_04_static_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      ubuntu_19_04_static_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      ubuntu_19_04_static_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      ubuntu_19_04_static_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      ubuntu_19_04_static_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      ubuntu_19_04_static_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      ubuntu_19_04_static_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      ubuntu_19_04_static_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      ubuntu_19_04_static_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd ubuntu-19.04
      docker build --pull --no-cache -t rippled/ubuntu-19.04 .
      docker run --rm -t rippled/ubuntu-19.04 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=ON $TEST_PY_OPTS"
- job: ubuntu_19_04_nonstatic_matrix
  pool:
    vmImage: 'Ubuntu 16.04'
  dependsOn: ubuntu_19_04_nonstatic_smoketest
  condition: succeeded()
  strategy:
    matrix:
      ubuntu_19_04_nonstatic_gcc_debug_nounity:
        TEST_PY_OPTS: --dir gcc.debug.nounity
      ubuntu_19_04_nonstatic_gcc_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=address
      ubuntu_19_04_nonstatic_gcc_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=thread
      ubuntu_19_04_nonstatic_gcc_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=memory
      ubuntu_19_04_nonstatic_gcc_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.nounity --generator_option=-Dsan=undefined
      ubuntu_19_04_nonstatic_gcc_debug_unity:
        TEST_PY_OPTS: --dir gcc.debug.unity
      ubuntu_19_04_nonstatic_gcc_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=address
      ubuntu_19_04_nonstatic_gcc_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=thread
      ubuntu_19_04_nonstatic_gcc_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=memory
      ubuntu_19_04_nonstatic_gcc_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir gcc.debug.unity --generator_option=-Dsan=undefined
      ubuntu_19_04_nonstatic_gcc_debug_coverage_nounity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity
      ubuntu_19_04_nonstatic_gcc_debug_coverage_unity:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity
      ubuntu_19_04_nonstatic_gcc_release_nounity:
        TEST_PY_OPTS: --dir gcc.release.nounity
      ubuntu_19_04_nonstatic_gcc_release_unity:
        TEST_PY_OPTS: --dir gcc.release.unity
      ubuntu_19_04_nonstatic_gcc_debug_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.nounity.profile
      ubuntu_19_04_nonstatic_gcc_debug_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.unity.profile
      ubuntu_19_04_nonstatic_gcc_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.nounity.profile
      ubuntu_19_04_nonstatic_gcc_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir gcc.debug.coverage.unity.profile
      ubuntu_19_04_nonstatic_gcc_release_nounity_profile:
        TEST_PY_OPTS: --dir gcc.release.nounity.profile
      ubuntu_19_04_nonstatic_gcc_release_unity_profile:
        TEST_PY_OPTS: --dir gcc.release.unity.profile
      ubuntu_19_04_nonstatic_clang_debug_nounity:
        TEST_PY_OPTS: --dir clang.debug.nounity
      ubuntu_19_04_nonstatic_clang_debug_nounity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=address
      ubuntu_19_04_nonstatic_clang_debug_nounity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=thread
      ubuntu_19_04_nonstatic_clang_debug_nounity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=memory
      ubuntu_19_04_nonstatic_clang_debug_nounity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.nounity --generator_option=-Dsan=undefined
      ubuntu_19_04_nonstatic_clang_debug_unity:
        TEST_PY_OPTS: --dir clang.debug.unity
      ubuntu_19_04_nonstatic_clang_debug_unity_sanitize_address:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=address
      ubuntu_19_04_nonstatic_clang_debug_unity_sanitize_thread:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=thread
      ubuntu_19_04_nonstatic_clang_debug_unity_sanitize_memory:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=memory
      ubuntu_19_04_nonstatic_clang_debug_unity_sanitize_undefined:
        TEST_PY_OPTS: --dir clang.debug.unity --generator_option=-Dsan=undefined
      ubuntu_19_04_nonstatic_clang_debug_coverage_nounity:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity
      ubuntu_19_04_nonstatic_clang_debug_coverage_unity:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity
      ubuntu_19_04_nonstatic_clang_release_nounity:
        TEST_PY_OPTS: --dir clang.release.nounity
      ubuntu_19_04_nonstatic_clang_release_unity:
        TEST_PY_OPTS: --dir clang.release.unity
      ubuntu_19_04_nonstatic_clang_debug_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.nounity.profile
      ubuntu_19_04_nonstatic_clang_debug_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.unity.profile
      ubuntu_19_04_nonstatic_clang_debug_coverage_nounity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.nounity.profile
      ubuntu_19_04_nonstatic_clang_debug_coverage_unity_profile:
        TEST_PY_OPTS: --dir clang.debug.coverage.unity.profile
      ubuntu_19_04_nonstatic_clang_release_nounity_profile:
        TEST_PY_OPTS: --dir clang.release.nounity.profile
      ubuntu_19_04_nonstatic_clang_release_unity_profile:
        TEST_PY_OPTS: --dir clang.release.unity.profile
  steps:
  - script: |
      cd ubuntu-19.04
      docker build --pull --no-cache -t rippled/ubuntu-19.04 .
      docker run --rm -t rippled/ubuntu-19.04 /bin/bash -c "cd .. && ./Builds/Test.py -v --generator_option=-GNinja --generator_option=-Dstatic=OFF $TEST_PY_OPTS"
